/*! Copyright Weeblr llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
var shlBootstrap=shlBootstrap||function(e){var t={updateBootstrap:function(){e("*[rel=tooltip]").tooltip(),e("select").chosen({disable_search_threshold:10,allow_single_deselect:!0}),e(".radio.btn-group label").addClass("btn"),e(".btn-group label:not(.active)").click(function(){var t=e(this),r=e("#"+t.attr("for"));r.prop("checked")||(t.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),""==r.val()?t.addClass("active btn-primary"):0==r.val()?t.addClass("active btn-danger"):t.addClass("active btn-success"),r.prop("checked",!0))}),e(".btn-group input[checked=checked]").each(function(){""==e(this).val()?e("label[for="+e(this).attr("id")+"]").addClass("active btn-primary"):0==e(this).val()?e("label[for="+e(this).attr("id")+"]").addClass("active btn-danger"):e("label[for="+e(this).attr("id")+"]").addClass("active btn-success")})},canOpenModal:!0,modals:{},modalTemplate:"<div class='shmodal hide ' id='{%selector%}'><div class='shmodal-header'><button type='button' class='close' data-dismiss='modal'>Ã—</button>{%title%}</div><div id='{%selector%}-container'></div></div>",selectedIdsUrl:"",setSelectedIdsUrl:function(e){shlBootstrap.selectedIdsUrl=e},getModalUrl:function(e){return e+shlBootstrap.selectedIdsUrl},closeModal:function(){var t=e("div.shmodal-header button.close");t.click()},setModalTitleFromModal:function(e){var t=window.parent.jQuery("div.shmodal-header:visible");t.html("<h3>"+e+"</h3>")},registerModal:function(t){var r={};r=e.extend({selector:"",title:"",url:"",width:.5,height:.5,onclose:"",footer:"",content:"",onDisplay:"",backdrop:!0,keyboard:!1},t),shlBootstrap.modals[r.selector]=r},renderModal:function(t,r){var a=shlBootstrap.modalTemplate.replace(new RegExp("{%selector%}","g"),r.selector),o=r.title?"<h3>"+r.title+"</h3>":"&nbsp;";a=a.replace("{%title%}",o),e(a).appendTo("#shl-modals-container"),e("#"+r.selector).on("show",function(){if(!shlBootstrap.canOpenModal)return!1;var t,r=shlBootstrap.modals[this.id],a=r.width<1?e(window).width()*r.width:r.width,o=r.height<1?e(window).height()*r.height:r.height,n=shlBootstrap.getModalUrl(r.url),l=jQuery("#"+r.selector);t=r.content?r.content:'<iframe class="iframe" src="'+n+'" height="'+o+'" width="'+a+'" ></iframe>',jQuery("#"+r.selector+"-container").html('<div class="shmodal-body" style="height:'+o+"px; width:"+a+'px;">'+t+"</div>"+r.footer);var i=l.height(),s=l.width(),d=jQuery(window).height(),c=jQuery(window).width(),h=(c-s)/2,u=(d-i)/2;jQuery("#"+r.selector).css({"margin-top":u,top:"0"}),jQuery("#"+r.selector).css({"margin-left":h,left:"0"}),r.onDisplay&&"function"==typeof window[r.onDisplay]&&window[r.onDisplay](this)}),e("#"+r.selector).on("hide",function(){var e=shlBootstrap.modals[this.id];e.onclose&&e.onclose(),jQuery("#"+this.id+"-container").innerHTML=""}),e("#"+r.selector).modal({keyboard:r.keyboard,backdrop:r.backdrop,show:!1})},renderModals:function(){e.each(shlBootstrap.modals,shlBootstrap.renderModal)},inputCounters:{},registerInputCounter:function(t){var r={maxCharacterSize:-1,originalStyle:"badge-success",warningStyle:"badge-warning",errorStyle:"badge-important",warningNumber:20,errorNumber:40,displayFormat:"#left",style:"shl-char-counter",title:""};t=e.extend(r,t),shlBootstrap.inputCounters[t.selector]=t},renderInputCounters:function(){e.each(shlBootstrap.inputCounters,shlBootstrap.renderInputCounter)},renderInputCounter:function(t,r){e("#"+r.selector).textareaCount(r)},onReady:function(){e("<div id='shl-modals-container'></div>").appendTo("body"),shlBootstrap.renderModals(),shlBootstrap.renderInputCounters()}};return jQuery(document).ready(t.onReady),t}(jQuery);!function(e){e.fn.textareaCount=function(t,r){function a(){return v.html(o()),"undefined"!=typeof r&&r.call(this,l()),!0}function o(){var e=p.val(),r=e.length;if(t.maxCharacterSize>0){r>=t.maxCharacterSize&&(e=e.substring(0,t.maxCharacterSize));var a=d(e),o=t.maxCharacterSize-a;if(s()||(o=t.maxCharacterSize),r>o){var l=this.scrollTop;p.val(e.substring(0,o)),this.scrollTop=l}v.removeClass(t.warningStyle),v.removeClass(t.originalStyle),r>t.errorNumber?v.addClass(t.errorStyle):r>t.warningNumber?v.addClass(t.warningStyle):v.addClass(t.originalStyle),f=p.val().length+a,s()||(f=p.val().length),b=h(c(p.val())),g=t.errorNumber-f}else{var a=d(e);f=p.val().length+a,s()||(f=p.val().length),b=h(c(p.val()))}return n()}function n(){var e=t.displayFormat;return e=e.replace("#input",f),e=e.replace("#words",b),m>0&&(e=e.replace("#max",m),e=e.replace("#left",g)),e}function l(){var e={input:f,max:m,left:g,words:b};return e}function i(e){return e.next(".charleft")}function s(){var e=navigator.appVersion;return-1!=e.toLowerCase().indexOf("win")?!0:!1}function d(e){for(var t=0,r=0;r<e.length;r++)"\n"==e.charAt(r)&&t++;return t}function c(e){var t=e+" ",r=/^[^A-Za-z0-9]+/gi,a=t.replace(r,""),o=rExp=/[^A-Za-z0-9]+/gi,n=a.replace(o," "),l=n.split(" ");return l}function h(e){var t=e.length-1;return t}var u={maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",errorStyle:"errorTextareaInfo",warningNumber:20,errorNumber:40,displayFormat:"#input characters | #words words",title:""},t=e.extend(u,t),p=e(this);p.wrap("<div class='shl-char-counter-wrapper'></div>"),e("<div class='charleft badge "+t.style+"' "+(t.title?"title='"+t.title+"'":"")+">&nbsp;</div>").insertAfter(p);var v=i(p);v.addClass(t.originalStyle);var f=0,m=t.maxCharacterSize,g=0,b=0;p.bind("keyup",function(e){a()}).bind("mouseover",function(e){setTimeout(function(){a()},10)}).bind("paste",function(e){setTimeout(function(){a()},10)}),a()}}(jQuery);
/*! Copyright Weeblr llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(e,o,n,s){"use strict;";function t(e){var o=s("#"+e),n=s(o.parent());o.slideUp(200,function(){o.remove();var e=n.children().length;e||n.parent().hide()})}function r(e){e.removeClass("wbl-spin").text("Error").addClass("wb-clr-alert")}function i(e){var o=e.data("element-id"),n=e.data("token"),i={uid:o};i[n]=1;s.post("index.php?option=com_ajax&plugin=shlib&method=removeMsg&format=json",i).done(function(n,s,i){try{"object"!=typeof n&&(n=JSON.parse(n)),"object"==typeof n?n.success?t(o):(console.log("ShLib: Ajax error: "+n.message),r(e)):console.log("wbLib: ajax error: no object in return")}catch(l){console.log("wbLib: ajax error decoding request response: "+l.message),console.debug(n),console.debug(l)}}).fail(function(o,n,s){console.log("wbLib: ajax error: "+n),console.debug(s),r(e)})}function l(e,o){var n=s(this),t=n.attr("id"),r=s("#wbl-msg-body-"+t);0==r.is(":visible")?(r.addClass("wbl-body-visible"),r.slideDown(300)):(r.slideUp(300),r.removeClass("wbl-body-visible"))}function c(e,o){var n=s(this);return n.html("x").addClass("wbl-spin"),i(n),!1}function a(){s(".wbl-msg-button-close").click(c),s(".wbl-container-msg-one-toggle").click(l)}function b(){try{a()}catch(e){console.log("Error setting up message center: "+e.message)}}return s(n).ready(b),e.wblib=e.wblib||{},e.wblib.msgCenter={refreshActions:function(){a()}},e}(window.weeblrApp=window.weeblrApp||{},window,document,jQuery);
/*! Copyright Weeblr llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(n,e,s,t){"use strict;";function r(n,e){try{var s="#"+(n||"wbl-spinner");if(i[s]&&i[s].count>0)i[s].count+=1;else if(i[s]&&i[s].count<=0)i[s].element.fadeIn();else{var r=t(s);r.length?(r.addClass("wbl-spinner-css"),e&&e["class"]&&r.addClass(e["class"]),i[s]={element:r,count:1},i[s].element.fadeIn()):console.log("wblib: requested to start a spinner for "+s+" but element not found")}}catch(o){console.log("wblib: error starting svg spinner: "+o.message)}}function o(n,e){try{var s="#"+(n||"wbl-spinner");if(!i[s])return;e?i[s].count=0:i[s].count-=1,i[s]&&i[s].count<=0&&(i[s].count=0,i[s].element.hide())}catch(t){console.log("wbLib: error stopping svg spinner: "+t.message)}}var i={};return n.spinner=n.spinner||{},n.spinner.start=r,n.spinner.stop=o,n}(window.wblib=window.wblib||{},window,document,jQuery);
/*! Copyright Weeblr llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(t,i,e,p){"use strict;";function s(i){i=i||u;try{p(i).each(o)}catch(e){console.log("wbLib: error setting up help tips: "+e.message)}return t.tips}function o(i,e){var s=p(e),o="#"+e.id+"-lbl",r=p(o);switch(b){case"popover":var w=r.data("content");w&&(r.off("mouseenter mouseleave"),n(s,w));break;case"tips":var w=r.attr("title");w||(w=r.data("original-title")),w&&(r.removeClass("hasTooltip").attr("title",""),n(s,w));break;default:console.log("wblib: invalid tips mode "+t.tips.tipsMode)}}function n(t,i){var e=p('<span class="wbtip-wrapper"><span type="button" class="wbtip-content">'+r(i)+"</span></span>"),s=t.parent();e.appendTo(s)}function r(t){var i=t.indexOf("<br />");return-1!=i&&(t=t.substr(i+6)),t}function w(i){return u=i,t.tips}function a(i){return b=i,t.tips}function c(t){"show"==t?(p(".wbtip-wrapper").show(),p(".wbtip-switch.wbtip-show").hide(),p(".wbtip-switch.wbtip-hide").show()):(p(".wbtip-wrapper").hide(),p(".wbtip-switch.wbtip-show").show(),p(".wbtip-switch.wbtip-hide").hide())}var u=".wbTip",b="popover";return t.tips=t.tips||{},t.tips.setAutoSetupSelector=w,t.tips.setupTips=s,t.tips.setupTip=o,t.tips.hideTips=c,t.tips.showTips=c,t.tips.setTipsMode=a,t}(window.weeblrApp=window.weeblrApp||{},window,document,jQuery);
/*! Copyright WeeblrPress - Weeblr,llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(e,a,i,s){"use strict";function t(e){e.preventDefault();var a=s(this),i=a.prev(I).first(),t=i.attr("id"),n=a.data("media-min-width"),r=a.data("media-min-height");if(!wp.media.frames.wblib_media_manager){wp.media.frames.wblib_media_manager=wp.media({title:a.data("media-title"),multiple:!1,library:{type:a.data("media-type")},button:{text:a.data("media-button")}});var d=function(){var e=wp.media.frames.wblib_media_manager.state().get("selection");e&&e.each(function(e){var d=e.attributes.width;n&&n>d&&console.log("This image is not wide enough. Minimal width is: "+n+" pixels.");var o=e.attributes.height;r&&r>o&&console.log("This image is not wide enough. Minimal width is: "+r+" pixels.");var l=e.attributes.url;if(i.val(l),s("#"+t+"_width").val(d),s("#"+t+"_height").val(o),a.data("media-preview")){var c=s("<img />").attr("src",l),u="#js-"+t+"-preview";s(u).empty().append(c)}})};wp.media.frames.wblib_media_manager.on("select",d)}wp.media.frames.wblib_media_manager.open()}function n(){s(D).on("click",t)}function r(){s(E).wpColorPicker()}function d(){s(R).on("click",o)}function o(a){a.preventDefault();var i=s(this),t={action:"wblib_config_action",config_item:"clear_transients",_ajax_nonce:e.ajax_nonces.clear_transients||""};s("#js-wbamp-clear-transients-msg").hide(),e.spinner.start("js-wbamp-clear-transients-spinner",{"class":"wbl-spinner-css-12"}),i.prop("disabled","disabled"),s.post(ajaxurl,t).done(function(a){console.debug(a),e.spinner.stop("js-wbamp-clear-transients-spinner"),a.success?(s("#js-wbamp-clear-transients-msg").removeClass("wbamp-ajax-response-msg-failure").addClass("wbamp-ajax-response-msg-success").html(a.data).fadeIn(),setTimeout(function(){s("#js-wbamp-clear-transients-msg").hide()},5e3)):s("#js-wbamp-clear-transients-msg").removeClass("wbamp-ajax-response-msg-success").addClass("wbamp-ajax-response-msg-failure").html(a.data).fadeIn(),i.prop("disabled",!1)})}function l(){s(T).on("click",c)}function c(a){a.preventDefault();var i=s(this),t={action:"wblib_config_action",config_item:"flush_rewrite_rules",_ajax_nonce:e.ajax_nonces.flush_rewrite_rules||""};s("#js-wbamp-flush-rewrite-rules-msg").hide(),e.spinner.start("js-wbamp-flush-rewrite-rules-spinner",{"class":"wbl-spinner-css-12"}),i.prop("disabled","disabled"),s.post(ajaxurl,t).done(function(a){console.debug(a),e.spinner.stop("js-wbamp-flush-rewrite-rules-spinner"),a.success?(s("#js-wbamp-flush-rewrite-rules-msg").removeClass("wbamp-ajax-response-msg-failure").addClass("wbamp-ajax-response-msg-success").html(a.data).fadeIn(),setTimeout(function(){s("#js-wbamp-flush-rewrite-rules-msg").hide()},5e3)):s("#js-wbamp-flush-rewrite-rules-msg").removeClass("wbamp-ajax-response-msg-success").addClass("wbamp-ajax-response-msg-failure").html(a.data).fadeIn(),i.prop("disabled",!1)})}function u(){var e=s(".js-wbamp-show-if");e.each(m),p()}function m(e,a){var i={},t=s(a),n=t.attr("class"),r=n&&n.split(" ");s.each(r,function(){"js-data"==this.substr(0,7)&&(i.hideable_id=this,i.$hideable_id=s("."+this),i.data_source=this.substr(8))});var d=t.data("always_hide");if(d)return i.always_hide=!0,void U.push(i);var o=s("#"+i.data_source);o.length&&(i.show_if_id=o.data("show_if_id"),i.show_include=o.data("show_include"),i.show_include=i.show_include&&i.show_include.toString().split(" "),i.show_exclude=o.data("show_exclude"),i.show_exclude=i.show_exclude&&i.show_exclude.toString().split(" ")),i.show_if_id&&(i.$show_trigger=s("#"+i.show_if_id),i.$show_trigger.length&&i.data_source&&(i.$show_trigger.on("change",p),U.push(i)))}function p(){s.each(U,function(e,a){if(a.always_hide)return void a.$hideable_id.fadeOut();var i=a.$show_trigger.val(),t=a.$show_trigger.prop("type");if("checkbox"==t){if(-1!=s.inArray("checked",a.show_include))return void(a.$show_trigger.prop("checked")?a.$hideable_id.fadeIn():a.$hideable_id.fadeOut());if(-1!=s.inArray("unchecked",a.show_include))return void(a.$show_trigger.prop("checked")?a.$hideable_id.fadeOut():a.$hideable_id.fadeIn())}return a.show_exclude&&-1!=s.inArray(i,a.show_exclude)?void a.$hideable_id.fadeOut():void(a.show_include?-1!=s.inArray(i,a.show_include)?a.$hideable_id.fadeIn():a.$hideable_id.fadeOut():a.$hideable_id.fadeIn())})}function h(e){e.preventDefault(),O.click(),a.location="#"}function _(){if(O=s("a.js-wblib-tab-upgrade"),O.length){var e=s(".js-wblib-upgrade-link");e.on("click",h)}}function w(e,a,s,t,n){s=parseInt(s)||1/0;var r=1/0===s?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+s;t=t||"/";var d=n?"; secure":"",o=encodeURIComponent(e)+"="+encodeURIComponent(a)+r+"; path="+t+d;i.cookie=o}function b(e){return e?decodeURIComponent(i.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}function f(e){w(encodeURIComponent(e),"",-1)}function g(e){e&&e.preventDefault();var a=s(this),i=a.attr("id");return A[i]||(A[i]={url:a.attr("href"),id:a.data("id"),embed_url:a.data("embed_url"),embed_url_hash:a.data("embed_url_hash"),button_id:a.data("button_id"),frame_id:a.data("frame_id"),frame_container_id:a.data("frame_container_id"),spinner_id:a.data("spinner_id"),spinner_container_id:a.data("spinner_container_id"),hash:a.data("hash"),state:a.data("state")}),"opened"==A[i].state?void y(A[i]):(s("#js-wbamp-settings-doc-msg-"+A[i].hash).empty(),void(B[A[i].id]?C(A[i],B[A[i].id]):(v(A[i]),jQuery.ajax({url:A[i].embed_url,error:function(e,a,t){j(A[i]),console.error("Error fetching documentation page "+A[i].id+", status: "+a+", code: "+e.status),s("#js-wbamp-settings-doc-msg-"+A[i].hash).html("Sorry, could not load help from server. Please try again later."),setTimeout(function(){s("#js-wbamp-settings-doc-msg-"+A[i].hash).empty()},7e3)},success:function(e,a,s){C(A[i],e)}}))))}function v(a){s("#"+a.spinner_container_id).slideDown(),e.spinner.start(a.spinner_id)}function j(a){e.spinner.stop(a.spinner_id),s("#"+a.spinner_container_id).hide()}function x(e){e.state="opened",s("#"+e.button_id).addClass("wblib-visible"),s("#"+e.frame_id).fadeIn()}function y(e){e.state="closed",s("#"+e.frame_id).slideUp(),s("#"+e.button_id).removeClass("wblib-visible");var a=i.getElementById(e.frame_id);a&&a.parentElement.removeChild(a)}function C(e,a){var t=!1;a&&!B[e.id]&&(B[e.id]=a);var n=i.getElementById(e.frame_id);n&&n.parentElement.removeChild(n);var r=s('<iframe id="'+e.frame_id+'" class="wblib-settings-doc-frame wblib-hide"></iframe>');s("#"+e.frame_container_id).append(r),n=r[0];var d,o;n.document?d=n.document:(o=n.contentWindow)&&(d=o.document),r.on("load",function(){if(j(e),x(e),!t&&e.embed_url_hash&&d){t=!0;var a=d.getElementById(e.embed_url_hash);if(a){var i=a.getBoundingClientRect();o.scrollTo(0,i.top)}}}),d.open(),d.writeln(a),d.close()}function $(){s(".js-wblib-settings-doc-embed").click(g)}function k(){try{n(),r(),d(),l(),u(),_(),$()}catch(e){console.log("wbLib: error setting up javascript: "+e.message)}}var I=".js-wbamp-media-manager-field",D=".js-wbamp-media-manager-button",E=".js-wblib-color-picker",R=".js-wbamp-clear-transients-button",T=".js-wbamp-flush-rewrite-rules-button",U=[],O=null,A=[],B={};return s(i).ready(k),e.setCookie=w,e.getCookie=b,e.deleteCookie=f,e.doc_embed={showHelp:g,displayHelp:C},e}(window.wblib=window.wblib||{},window,document,jQuery);
